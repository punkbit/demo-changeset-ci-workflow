#!/bin/bash

# Generate standardized release commit message
# Usage: generate-release-commit-message <version> <release_type>
# Example: generate-release-commit-message 1.2.3 latest
# Output: chore: ðŸ¤– release v1.2.3 (latest)

if [[ $# -lt 2 ]]; then
  echo "ðŸ‘¹ Oops! Missing arguments" >&2
  echo "ðŸ’¡ Use generate-release-commit-message <version> <release_type>, e.g. generate-release-commit-message 1.2.3 latest"

  exit 1
fi

VERSION="$1"
RELEASE_TYPE="$2"

if [[ ! "$VERSION" =~ ^[0-9]+\.[0-9]+\.[0-9]+(-[a-zA-Z0-9.]+)?$ ]]; then
  echo "ðŸ‘¹ Oops! Invalid version format: '$VERSION'"
  echo "ðŸ’¡ Expected format X.Y.Z or X.Y.Z-suffix, e.g., 1.2.3 or 1.2.3-rc.1"
  exit 1
fi

if [[ ! "$RELEASE_TYPE" =~ ^(latest|rc|test)$ ]]; then
  echo "ðŸ‘¹ Oops! Invalid release type '$RELEASE_TYPE'"
  echo "ðŸ’¡ Expected one of latest, rc or test"

  exit 1
fi

echo "chore: ðŸ¤– release v${VERSION} (${RELEASE_TYPE})"
